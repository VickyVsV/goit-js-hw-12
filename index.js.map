{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '32675885-ded1f22898004e0649ebaa6fc';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get(\n    `?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n  );\n  return response;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n  galleryEl: document.querySelector('.gallery'),\n};\n\nexport function renderPhotoList(images) {\n  const photoListTemplate = createGallery(images);\n  refs.galleryEl.insertAdjacentHTML('beforeend', photoListTemplate);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  refs.galleryEl.innerHTML = '';\n}\n\nfunction createGallery(images) {\n  return images\n    .map(\n      image => `\n        <li class=\"gallery-item\">\n          <div class=\"image-container\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" /></a>\n          </div>\n          <div class=\"info-container\">\n            <ul class=\"img-desc\">\n              <li><strong>Likes:</strong> ${image.likes}</li>\n              <li><strong>Views:</strong> ${image.views}</li>\n              <li><strong>Comments:</strong> ${image.comments}</li>\n              <li><strong>Downloads:</strong> ${image.downloads}</li>\n            </ul>\n          </div>\n        </li>\n      `\n    )\n    .join('');\n}\n\nlet lightbox;\n\nlightbox = new SimpleLightbox('.gallery a', {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { renderPhotoList, clearGallery } from './js/render-functions.js';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  inputEl: document.querySelector('.input-value'),\n  loadingEl: document.querySelector('.loading'),\n  loadMoreEl: document.querySelector('.btn-load-more'),\n};\n\nlet query = '';\nlet page = 1;\nlet totalPages = 0;\n\nfunction showLoader() {\n  refs.loadingEl.style.display = 'block';\n}\n\nfunction hideLoader() {\n  refs.loadingEl.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\n  refs.loadMoreEl.classList.remove('btn-load-more-hidden');\n}\n\nfunction hideLoadMoreButton() {\n  refs.loadMoreEl.classList.add('btn-load-more-hidden');\n}\n\nrefs.formEl.addEventListener('submit', async evt => {\n  evt.preventDefault();\n  page = 1;\n  query = refs.inputEl.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: '❌ Please enter a search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();\n  showLoader();\n\n  try {\n    const responseGetImages = await getImagesByQuery(query, page);\n    hideLoader();\n    totalPages = Math.ceil(responseGetImages.data.totalHits / 15); //округление в большую сторону\n    if (responseGetImages.data.hits.length === 0 && refs.inputEl.value !== '') {\n      // Если нет изображений, показываем сообщение\n      iziToast.error({\n        title: 'Error',\n        message: `❌ Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n    } else {\n      // Если есть изображения, скрываем сообщение\n      renderPhotoList(responseGetImages.data.hits);\n      if(totalPages > 1){\n        showLoadMoreButton();\n      }\n    }\n  } catch (error) {\n    hideLoadMoreButton();\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: `❌ Something went wrong!`,\n      position: 'topRight',\n    });\n  }\n});\n\nrefs.loadMoreEl.addEventListener('click', async () => {\n  if (page >= totalPages) {\n    hideLoadMoreButton();\n    iziToast.error({\n      title: 'Error',\n      message: `❌ We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n  hideLoadMoreButton();\n\n  page++;\n\n  try {\n    const responseGetImages = await getImagesByQuery(query, page);\n    hideLoader();\n\n    renderPhotoList(responseGetImages.data.hits);\n\n    const card = document.querySelector('.gallery-item');\n    if (card) {\n      const cardHeight = card.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (page < totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.error({\n        title: 'Error',\n        message: `❌ We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n      });\n    }\n  \n  } catch (error) {\n    hideLoadMoreButton();\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: `❌ Something went wrong!`,\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["API_KEY","axios","getImagesByQuery","query","page","refs","renderPhotoList","images","photoListTemplate","createGallery","lightbox","clearGallery","image","SimpleLightbox","totalPages","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","evt","iziToast","responseGetImages","card","cardHeight"],"mappings":"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"}